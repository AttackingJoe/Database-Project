SQL> SET LINESIZE 1000
SQL> /*
SQL> CIS 353 - Database Design Project
SQL> Steven Bouwkamp
SQL> Caitlin Crowe
SQL> Joshua Crum
SQL> Bryce Hutton
SQL>  */
SQL> 
SQL> 
SQL> DROP TABLE Weapon CASCADE CONSTRAINTS;

Table dropped.

SQL> DROP TABLE WeaponType CASCADE CONSTRAINTS;

Table dropped.

SQL> DROP TABLE Enchantment CASCADE CONSTRAINTS;

Table dropped.

SQL> DROP TABLE NPC CASCADE CONSTRAINTS;

Table dropped.

SQL> DROP TABLE Quests CASCADE CONSTRAINTS;

Table dropped.

SQL> DROP TABLE Monster CASCADE CONSTRAINTS;

Table dropped.

SQL> DROP TABLE Locations CASCADE CONSTRAINTS;

Table dropped.

SQL> DROP TABLE DamageMulti CASCADE CONSTRAINTS;

Table dropped.

SQL> DROP TABLE CharacterSkills CASCADE CONSTRAINTS;

Table dropped.

SQL> DROP TABLE CharacterMagic CASCADE CONSTRAINTS;

Table dropped.

SQL> DROP TABLE CharacterStats CASCADE CONSTRAINTS;

Table dropped.

SQL> DROP TABLE CharacterFaction CASCADE CONSTRAINTS;

Table dropped.

SQL> DROP TABLE QuestStarted CASCADE CONSTRAINTS;

Table dropped.

SQL> DROP TABLE QuestLocated CASCADE CONSTRAINTS;

Table dropped.

SQL> 
SQL> CREATE TABLE WeaponType (
  2    wName	  CHAR(20),
  3    speed	  INTEGER  NOT NULL,
  4    stagger	  INTEGER  NOT NULL,
  5    stamina	  INTEGER  NOT NULL,
  6    damageType CHAR(20) NOT NULL,
  7    wield	  CHAR(20) NOT NULL,
  8    --SKY_WT1: Names of weapons like 'sword' are unique
  9    CONSTRAINT SKY_WT1 PRIMARY KEY (wName)
 10  );

Table created.

SQL> --
SQL> --
SQL> CREATE TABLE Locations (
  2    locationID INTEGER,
  3    weather	  CHAR(20) NOT NULL,
  4    locType	  CHAR(20) NOT NULL,
  5    refID	  INTEGER,
  6    locatedIn  INTEGER,
  7    -- SKY_l1: each location ID must be unique
  8    CONSTRAINT SKY_l1 PRIMARY KEY (locationID),
  9    --   SKY_l2: if a location is located somewhere, it must be located in a real location.
 10    CONSTRAINT SKY_l2 FOREIGN KEY (locatedIn) REFERENCES Locations (locationID)
 11  );

Table created.

SQL> 
SQL> --
SQL> --
SQL> CREATE TABLE NPC (
  2    refID	  INTEGER,
  3    essential  CHAR	   NOT NULL,
  4    name	  CHAR(20) NOT NULL,
  5    gender	  CHAR	   NOT NULL,
  6    race	  CHAR(20) NOT NULL,
  7    charClass  CHAR(20) NOT NULL,
  8    charLevel  INTEGER  NOT NULL,
  9    locationID INTEGER,
 10    --   SKY_c1: All characters have a unique refID.
 11    CONSTRAINT SKY_c1 PRIMARY KEY (refID),
 12    --   SKY_c2: The character gender has to be either "M" for male or "F" for female.
 13    CONSTRAINT SKY_c2 CHECK (gender IN ('M', 'F')),
 14    --   SKY_c3: The character charClass has to be 'player', 'merchant', 'bandit', 'mage', 'fighter', or 'civilian'.
 15    CONSTRAINT SKY_c3 CHECK (charClass IN ('player', 'merchant', 'bandit', 'mage', 'fighter', 'civilian')),
 16    --   SKY_c4: The character level has to be greater than 0, but less than 101.
 17    CONSTRAINT SKY_c4 CHECK (NOT (charLevel < 1 OR charLevel > 100)),
 18    --   SKY_c5: The character race has to be 'Altmer', 'Argonian', 'Bosmer', 'Breton', 'Dunmer', 'Imperial', 'Khajiit', 'Nord', 'Orsimer', or 'Redguard'.
 19    CONSTRAINT SKY_c5 CHECK (race IN
 20  				('Altmer', 'Argonian', 'Bosmer', 'Breton', 'Dunmer', 'Imperial', 'Khajiit', 'Nord', 'Orsimer', 'Redguard')),
 21    -- SKY_c6: The location of the character must be valid
 22    CONSTRAINT SKY_c6 FOREIGN KEY (locationID) REFERENCES Locations (locationID)
 23  );

Table created.

SQL> --
SQL> --
SQL> CREATE TABLE Weapon (
  2    wID	  INTEGER,
  3    attack	  INTEGER  NOT NULL,
  4    wepValue   INTEGER  NOT NULL,
  5    weight	  INTEGER  NOT NULL,
  6    locationID INTEGER,
  7    refID	  INTEGER,
  8    material   CHAR(20) NOT NULL,
  9    wName	  CHAR(20) NOT NULL,
 10    --SKY_w1: Each weapon ID must be unique
 11    CONSTRAINT SKY_w1 PRIMARY KEY (wID),
 12    --SKY_w2: The potential locationID of the weapon must be a valid location
 13    CONSTRAINT SKY_w2 FOREIGN KEY (locationID) REFERENCES Locations (locationID) DEFERRABLE INITIALLY DEFERRED,
 14    --SKY_w3: The potential character who owns the weapon must be a valid character
 15    CONSTRAINT SKY_w3 FOREIGN KEY (refID) REFERENCES NPC (refID) DEFERRABLE INITIALLY DEFERRED,
 16    --SKY_w4: The name of what type of weapon it is must be a valid WeaponType
 17    CONSTRAINT SKY_w4 FOREIGN KEY (wName) REFERENCES WeaponType (wName) DEFERRABLE INITIALLY DEFERRED,
 18    --SKY_w5: This constraint makes sure that a weapon is either in an inventory or in a location.
 19    CONSTRAINT SKY_w5 CHECK (locationID IS NOT NULL OR refID IS NOT NULL)
 20  );

Table created.

SQL> --
SQL> --
SQL> CREATE TABLE Enchantment (
  2    wID	       INTEGER,
  3    enchantmentName CHAR(40),
  4    soulCharge      INTEGER	NOT NULL,
  5    effect	       CHAR(40) NOT NULL,
  6    enchantValue    INTEGER	NOT NULL, -- changed 'value' to 'enchantValue'
  7    --SKY_e1: an enchantment must be on a valid weapon ID with a valid enchantment name
  8    CONSTRAINT SKY_e1 PRIMARY KEY (wID, enchantmentName),
  9    --SKY_e2: the weapon the enchantment is on must exist
 10    CONSTRAINT SKY_e2 FOREIGN KEY (wID) REFERENCES Weapon (wID) DEFERRABLE INITIALLY DEFERRED
 11  );

Table created.

SQL> 
SQL> 
SQL> --
SQL> --
SQL> CREATE TABLE Quests (
  2    questName CHAR(40),
  3    -- SKY_q1: The names of quests must be unique
  4    CONSTRAINT SKY_q1 PRIMARY KEY (questName)
  5  );

Table created.

SQL> 
SQL> --
SQL> --
SQL> 
SQL> CREATE TABLE Monster (
  2    id	    INTEGER,
  3    health	    INTEGER  NOT NULL,
  4    monsterLevel INTEGER  NOT NULL,
  5    loot	    INTEGER,
  6    locationID   INTEGER  NOT NULL,
  7    monsterType  CHAR(20) NOT NULL,
  8    bounty	    INTEGER,
  9    soulSize     INTEGER  NOT NULL,
 10    refID	    INTEGER,
 11    duration     INTEGER,
 12    timeSummoned INTEGER,
 13    --   SKY_m1: This constraint makes sure the level is between 1 and 100
 14    CONSTRAINT SKY_m1 CHECK (NOT (monsterLevel < 1 OR monsterLevel > 100)),
 15    --   SKY_m3: monster health must be greater than or equal to 100
 16    CONSTRAINT SKY_m3 CHECK (NOT (health < 100)),
 17    --   SKY_m4: checks to make sure that the total loot dropped by a monster is within a specific range dependant upon their level.
 18    CONSTRAINT SKY_m4 CHECK (NOT (loot > (monsterLevel * 100))),
 19    --   SKY_m5: the monster's id must be unique
 20    CONSTRAINT SKY_m5 PRIMARY KEY (id),
 21    --   SKY_m6: the location that the monster is at must exist
 22    CONSTRAINT SKY_m6 FOREIGN KEY (locationID) REFERENCES Locations (locationID) DEFERRABLE INITIALLY DEFERRED,
 23    --   SKY_m7: potential the summoner's refID must exist
 24    CONSTRAINT SKY_m7 FOREIGN KEY (refID) REFERENCES NPC (refID) DEFERRABLE INITIALLY DEFERRED
 25  );

Table created.

SQL> --
SQL> --
SQL> CREATE TABLE DamageMulti (
  2    id	  INTEGER,
  3    damageMult INTEGER,
  4    -- SKY_dm1: the id and the damageMult must be a unique pair
  5    CONSTRAINT SKY_dm1 PRIMARY KEY (id, damageMult),
  6    -- SKY_dm2: the id of the monster must exist
  7    CONSTRAINT SKY_dm2 FOREIGN KEY (id) REFERENCES Monster (id) DEFERRABLE INITIALLY DEFERRED
  8  );

Table created.

SQL> --
SQL> --
SQL> 
SQL> CREATE TABLE CharacterSkills (
  2    refID  INTEGER,
  3    skills CHAR(20) NOT NULL,
  4    --SKY_csk1: The refID and skills pair must be unique
  5    CONSTRAINT SKY_csk1 PRIMARY KEY (refID, skills),
  6    --SKY_csk2: The refID must be a valid refID
  7    CONSTRAINT SKY_csk2 FOREIGN KEY (refID) REFERENCES NPC (refID) DEFERRABLE INITIALLY DEFERRED,
  8    --SKY_csk3: The character can only have these skills: 'Armor','Stealing', 'Crafting', or 'Swordsmanship'.
  9    CONSTRAINT SKY_csk3 CHECK (skills IN ('Armor', 'Stealing', 'Crafting', 'Swordsmanship'))
 10  );

Table created.

SQL> --
SQL> --
SQL> CREATE TABLE CharacterMagic (
  2    refID INTEGER,
  3    magic CHAR(20) NOT NULL,
  4    --SKY_cmg1: The refID and magic pair must be unique
  5    CONSTRAINT SKY_cmg1 PRIMARY KEY (refID, magic),
  6    --SKY_cmg2: The refID must be a valid refID
  7    CONSTRAINT SKY_cmg2 FOREIGN KEY (refID) REFERENCES NPC (refID) DEFERRABLE INITIALLY DEFERRED,
  8    --   SKY_cmg3 checks to make sure the character's magic skill is one of the following strings in the list.
  9    CONSTRAINT SKY_cmg3 CHECK (magic IN ('Alteration', 'Conjuration', 'Destruction', 'Illusion', 'Restoration'))
 10  );

Table created.

SQL> --
SQL> --
SQL> CREATE TABLE CharacterStats (
  2    refID INTEGER,
  3    stats INTEGER NOT NULL,
  4    --SKY_cstat1: The refID and stats pair must be unique
  5    CONSTRAINT SKY_cstat1 PRIMARY KEY (refID, stats),
  6    --SKY_cstat2: The refID must be a valid refID
  7    CONSTRAINT SKY_cstat2 FOREIGN KEY (refID) REFERENCES NPC (refID) DEFERRABLE INITIALLY DEFERRED
  8  );

Table created.

SQL> --
SQL> --
SQL> CREATE TABLE CharacterFaction (
  2    refID   INTEGER,
  3    faction CHAR(20) NOT NULL,
  4    --SKY_cf1: The refID and magit=c pair must be unique
  5    CONSTRAINT SKY_cf1 PRIMARY KEY (refID, faction),
  6    --SKY_cf2: The refID must be a valid refID
  7    CONSTRAINT SKY_cf2 FOREIGN KEY (refID) REFERENCES NPC (refID) DEFERRABLE INITIALLY DEFERRED,
  8    --   SKY_cf3: The character can only be apart of the following factions:
  9    CONSTRAINT SKY_cf3 CHECK (faction IN ('Bards College', 'Greybeards'))
 10  );

Table created.

SQL> --
SQL> --
SQL> CREATE TABLE QuestStarted (
  2    questName   CHAR(40),
  3    refID	   INTEGER,
  4    timeStarted INTEGER NOT NULL,
  5    --   SKY_qs1: The questname and the refID must be a unique pair
  6    CONSTRAINT SKY_qs1 PRIMARY KEY (questName, refID),
  7    --   SKY_qs2: The questName must be a valid name for a Quest
  8    CONSTRAINT SKY_qs2 FOREIGN KEY (questName) REFERENCES Quests (questName) DEFERRABLE INITIALLY DEFERRED,
  9    --   SKY_qs3: The refID must be a valid Character
 10    CONSTRAINT SKY_qs3 FOREIGN KEY (refID) REFERENCES NPC (refID) DEFERRABLE INITIALLY DEFERRED
 11  );

Table created.

SQL> 
SQL> CREATE TABLE QuestLocated (
  2    locationID INTEGER,
  3    questName  CHAR(40),
  4    --   SKY_ql1: The questname and location must be a unique pair
  5    CONSTRAINT SKY_ql1 PRIMARY KEY (locationID, questName),
  6    --   SKY_ql2: The locationID must be a valid location
  7    CONSTRAINT SKY_ql2 FOREIGN KEY (locationID) REFERENCES Locations (locationID) DEFERRABLE INITIALLY DEFERRED,
  8    --   SKY_ql3: The quest name must be a valid quest
  9    CONSTRAINT SKY_ql3 FOREIGN KEY (questName) REFERENCES Quests (questName) DEFERRABLE INITIALLY DEFERRED
 10  );

Table created.

SQL> 
SQL> -- ALTER SESSION SET NLS_DATE_FORMAT = 'YYYY-MM-DD';
SQL> --------------------------------------------------------------------------------------------------------------
SQL> --Populate the database
SQL> --------------------------------------------------------------------------------------------------------------
SQL> SET FEEDBACK OFF
SQL> --------------------------------------------
SQL> INSERT INTO Locations VALUES(1, 'Cloudy', 'Plains', NULL, NULL);
SQL> INSERT INTO Locations VALUES(2, 'Stormy', 'City', 4, 1);
SQL> INSERT INTO Locations VALUES(3, 'Indoors', 'House', 2, 2);
SQL> INSERT INTO Locations VALUES(4, 'Frogs', 'Guild', 1, 2);
SQL> INSERT INTO Locations VALUES(5, 'Snowy', 'Mountains', 3, 1);
SQL> INSERT INTO Locations VALUES(6, 'Foggy', 'Swamp', 2, 2);
SQL> --------------------------------------------
SQL> INSERT INTO WeaponType VALUES ('axe', 3, 4, 10, 'slashing', 'two-handed');
SQL> INSERT INTO WeaponType VALUES ('bow', 3, 2, 4, 'piercing', 'two-handed');
SQL> INSERT INTO WeaponType VALUES ('mace', 3, 3, 8, 'bludgeoning', 'one-handed');
SQL> INSERT INTO WeaponType VALUES ('spork', 10, 0, 1, 'slashing', 'one-handed');
SQL> INSERT INTO WeaponType VALUES ('dagger', 8, 0, 2, 'slashing', 'one-handed');
SQL> INSERT INTO WeaponType VALUES ('sword', 5, 2, 5, 'slashing', 'one-handed');
SQL> --------------------------------------------
SQL> INSERT INTO Weapon VALUES (100, 10, 100, 5, NULL, 1, 'steel', 'dagger');
SQL> INSERT INTO Weapon VALUES (200, 8, 80, 2, 5, NULL, 'wood', 'bow');
SQL> INSERT INTO Weapon VALUES (300, 11, 190, 10, NULL, 3, 'iron', 'mace');
SQL> INSERT INTO Weapon VALUES (400, 2, 20, 1, NULL, 4, 'iron', 'spork');
SQL> INSERT INTO Weapon VALUES (500, 15, 500, 15, 6, NULL, 'glass', 'axe');
SQL> INSERT INTO Weapon VALUES (600, 20, 750, 8, NULL, 2, 'steel', 'sword');
SQL> INSERT INTO Weapon VALUES (700, 9, 160, 4, NULL, 5, 'steel', 'bow');
SQL> --------------------------------------------
SQL> INSERT INTO Quests VALUES ('A New Order');
SQL> INSERT INTO Quests VALUES ('No Stone Unturned');
SQL> INSERT INTO Quests VALUES ('Monty Python and the Holy Grail');
SQL> INSERT INTO Quests VALUES ('Under New Management');
SQL> INSERT INTO Quests VALUES ('Whodunit');
SQL> INSERT INTO Quests VALUES ('Taking Care of Business');
SQL> INSERT INTO Quests VALUES ('The Cure for Madness');
SQL> --------------------------------------------
SQL> INSERT INTO NPC VALUES (1, 'n', 'DaggerMan', 'M', 'Khajiit', 'bandit', 10, 5);
SQL> INSERT INTO NPC VALUES (2, 'y', 'Link', 'M', 'Dunmer', 'player', 72, 1);
SQL> INSERT INTO NPC VALUES (3, 'n', 'MaceMan', 'M', 'Nord', 'fighter', 32, 4);
SQL> INSERT INTO NPC VALUES (4, 'n', 'SporkBoy', 'M', 'Altmer', 'civilian', 1, 2);
SQL> INSERT INTO NPC VALUES (5, 'n', 'Archer', 'M', 'Imperial', 'bandit', 32, 3);
SQL> INSERT INTO NPC VALUES (6, 'n', 'BowMan', 'F', 'Imperial', 'fighter', 32, 3);
SQL> INSERT INTO NPC VALUES (7, 'n', 'Charles', 'F', 'Imperial', 'bandit', 4, 5);
SQL> --------------------------------------------
SQL> INSERT INTO Enchantment VALUES (100, 'Lunar', 17, 'Came from the Moon', 1000);
SQL> INSERT INTO Enchantment VALUES (400, 'Unbending', 100, 'Will never bend', 800);
SQL> INSERT INTO Enchantment VALUES (600, 'Master', 80, 'Allows for time travel', 2000);
SQL> INSERT INTO Enchantment VALUES (700, 'Shocking', 32, 'Acts like a taser', 250);
SQL> --------------------------------------------
SQL> INSERT INTO QuestStarted VALUES ('A New Order', 1, 1200);
SQL> INSERT INTO QuestStarted VALUES ('No Stone Unturned', 1, 1300);
SQL> INSERT INTO QuestStarted VALUES ('Monty Python and the Holy Grail', 1, 1400);
SQL> INSERT INTO QuestStarted VALUES ('Under New Management', 1, 1500);
SQL> INSERT INTO QuestStarted VALUES ('Whodunit', 1, 1600);
SQL> INSERT INTO QuestStarted VALUES ('Taking Care of Business', 1, 1700);
SQL> INSERT INTO QuestStarted VALUES ('The Cure for Madness', 1, 1800);
SQL> INSERT INTO QuestStarted VALUES ('Whodunit', 2, 0100);
SQL> INSERT INTO QuestStarted VALUES ('Whodunit', 4, 0550);
SQL> INSERT INTO QuestStarted VALUES ('Whodunit', 6, 1900);
SQL> --------------------------------------------
SQL> INSERT INTO QuestLocated VALUES (1, 'A New Order');
SQL> INSERT INTO QuestLocated VALUES (2, 'No Stone Unturned');
SQL> INSERT INTO QuestLocated VALUES (3, 'Monty Python and the Holy Grail');
SQL> INSERT INTO QuestLocated VALUES (4, 'Under New Management');
SQL> INSERT INTO QuestLocated VALUES (1, 'Whodunit');
SQL> INSERT INTO QuestLocated VALUES (5, 'Taking Care of Business');
SQL> INSERT INTO QuestLocated VALUES (1, 'The Cure for Madness');
SQL> --------------------------------------------
SQL> INSERT INTO CharacterFaction VALUES (1, 'Bards College');
SQL> INSERT INTO CharacterFaction VALUES (2, 'Greybeards');
SQL> INSERT INTO CharacterFaction VALUES (3, 'Bards College');
SQL> INSERT INTO CharacterFaction VALUES (4, 'Bards College');
SQL> INSERT INTO CharacterFaction VALUES (5, 'Greybeards');
SQL> INSERT INTO CharacterFaction VALUES (6, 'Bards College');
SQL> --------------------------------------------
SQL> INSERT INTO CharacterMagic VALUES (1, 'Restoration');
SQL> INSERT INTO CharacterMagic VALUES (2, 'Illusion');
SQL> --------------------------------------------
SQL> INSERT INTO CharacterSkills VALUES (3, 'Armor');
SQL> INSERT INTO CharacterSkills VALUES (3, 'Stealing');
SQL> INSERT INTO CharacterSkills VALUES (2, 'Crafting');
SQL> INSERT INTO CharacterSkills VALUES (1, 'Swordsmanship');
SQL> --------------------------------------------
SQL> INSERT INTO CharacterStats VALUES (3, 100);
SQL> INSERT INTO CharacterStats VALUES (2, 200);
SQL> INSERT INTO CharacterStats VALUES (1, 555);
SQL> --------------------------------------------
SQL> INSERT INTO Monster VALUES (100, 100, 10, 50, 1, 'cow', 100, 5, NULL, NULL, NULL);
SQL> INSERT INTO Monster VALUES (105, 100, 50, 100, 2, 'goblin', 0, 5, NULL, NULL, NULL);
SQL> INSERT INTO Monster VALUES (110, 100, 60, 100, 3, 'dragon', 0, 5, NULL, NULL, NULL);
SQL> INSERT INTO Monster VALUES (115, 100, 70, 200, 4, 'chicken', 500, 5, NULL, NULL, NULL);
SQL> INSERT INTO Monster VALUES (120, 100, 99, 250, 4, 'squirrel', 1000, 100, 1, 10, 17);
SQL> --------------------------------------------
SQL> INSERT INTO DamageMulti VALUES (120, 1000);
SQL> INSERT INTO DamageMulti VALUES (110, 5);
SQL> INSERT INTO DamageMulti VALUES (115, 353);
SQL> 
SQL> SET FEEDBACK ON
SQL> COMMIT;

Commit complete.

SQL> --------------------------------------------
SQL> /*
SQL> Queries to print out database. These are NOT the official queries
SQL>  */
SQL> SELECT *
  2  FROM WeaponType;

WNAME                     SPEED    STAGGER    STAMINA DAMAGETYPE           WIELD                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
-------------------- ---------- ---------- ---------- -------------------- --------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
axe                           3          4         10 slashing             two-handed                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
bow                           3          2          4 piercing             two-handed                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
mace                          3          3          8 bludgeoning          one-handed                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
spork                        10          0          1 slashing             one-handed                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
dagger                        8          0          2 slashing             one-handed                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
sword                         5          2          5 slashing             one-handed                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   

6 rows selected.

SQL> SELECT *
  2  FROM Weapon;

       WID     ATTACK   WEPVALUE     WEIGHT LOCATIONID      REFID MATERIAL             WNAME                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
---------- ---------- ---------- ---------- ---------- ---------- -------------------- --------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
       100         10        100          5                     1 steel                dagger                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
       200          8         80          2          5            wood                 bow                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
       300         11        190         10                     3 iron                 mace                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
       400          2         20          1                     4 iron                 spork                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
       500         15        500         15          6            glass                axe                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
       600         20        750          8                     2 steel                sword                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
       700          9        160          4                     5 steel                bow                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              

7 rows selected.

SQL> SELECT *
  2  FROM Enchantment;

       WID ENCHANTMENTNAME                          SOULCHARGE EFFECT                                   ENCHANTVALUE                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
---------- ---------------------------------------- ---------- ---------------------------------------- ------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
       100 Lunar                                            17 Came from the Moon                               1000                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
       400 Unbending                                       100 Will never bend                                   800                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
       600 Master                                           80 Allows for time travel                           2000                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
       700 Shocking                                         32 Acts like a taser                                 250                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    

4 rows selected.

SQL> SELECT *
  2  FROM NPC;

     REFID E NAME                 G RACE                 CHARCLASS             CHARLEVEL LOCATIONID                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
---------- - -------------------- - -------------------- -------------------- ---------- ----------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
         1 n DaggerMan            M Khajiit              bandit                       10          5                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
         2 y Link                 M Dunmer               player                       72          1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
         3 n MaceMan              M Nord                 fighter                      32          4                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
         4 n SporkBoy             M Altmer               civilian                      1          2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
         5 n Archer               M Imperial             bandit                       32          3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
         6 n BowMan               F Imperial             fighter                      32          3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
         7 n Charles              F Imperial             bandit                        4          5                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     

7 rows selected.

SQL> SELECT *
  2  FROM Quests;

QUESTNAME                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
----------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
A New Order                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
Monty Python and the Holy Grail                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
No Stone Unturned                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
Taking Care of Business                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
The Cure for Madness                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
Under New Management                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
Whodunit                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                

7 rows selected.

SQL> SELECT *
  2  FROM Monster;

        ID     HEALTH MONSTERLEVEL       LOOT LOCATIONID MONSTERTYPE              BOUNTY   SOULSIZE      REFID   DURATION TIMESUMMONED                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
---------- ---------- ------------ ---------- ---------- -------------------- ---------- ---------- ---------- ---------- ------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
       100        100           10         50          1 cow                         100          5                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
       105        100           50        100          2 goblin                        0          5                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
       110        100           60        100          3 dragon                        0          5                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
       115        100           70        200          4 chicken                     500          5                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
       120        100           99        250          4 squirrel                   1000        100          1         10           17                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  

5 rows selected.

SQL> SELECT *
  2  FROM Locations;

LOCATIONID WEATHER              LOCTYPE                   REFID  LOCATEDIN                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
---------- -------------------- -------------------- ---------- ----------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
         1 Cloudy               Plains                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
         2 Stormy               City                          4          1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
         3 Indoors              House                         2          2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
         4 Frogs                Guild                         1          2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
         5 Snowy                Mountains                     3          1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
         6 Foggy                Swamp                         2          2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              

6 rows selected.

SQL> SELECT *
  2  FROM DamageMulti;

        ID DAMAGEMULT                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
---------- ----------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
       110          5                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
       115        353                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
       120       1000                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   

3 rows selected.

SQL> SELECT *
  2  FROM CharacterSkills;

     REFID SKILLS                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
---------- --------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
         1 Swordsmanship                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
         2 Crafting                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
         3 Armor                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
         3 Stealing                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     

4 rows selected.

SQL> SELECT *
  2  FROM CharacterMagic;

     REFID MAGIC                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
---------- --------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
         1 Restoration                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
         2 Illusion                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     

2 rows selected.

SQL> SELECT *
  2  FROM CharacterStats;

     REFID      STATS                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
---------- ----------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
         1        555                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
         2        200                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
         3        100                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   

3 rows selected.

SQL> SELECT *
  2  FROM CharacterFaction;

     REFID FACTION                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
---------- --------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
         1 Bards College                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
         2 Greybeards                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
         3 Bards College                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
         4 Bards College                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
         5 Greybeards                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
         6 Bards College                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                

6 rows selected.

SQL> SELECT *
  2  FROM QuestStarted;

QUESTNAME                                     REFID TIMESTARTED                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
---------------------------------------- ---------- -----------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
A New Order                                       1        1200                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
No Stone Unturned                                 1        1300                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
Monty Python and the Holy Grail                   1        1400                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
Under New Management                              1        1500                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
Whodunit                                          1        1600                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
Taking Care of Business                           1        1700                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
The Cure for Madness                              1        1800                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
Whodunit                                          2         100                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
Whodunit                                          4         550                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
Whodunit                                          6        1900                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         

10 rows selected.

SQL> SELECT *
  2  FROM QuestLocated;

LOCATIONID QUESTNAME                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
---------- ----------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
         1 A New Order                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
         1 The Cure for Madness                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
         1 Whodunit                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
         2 No Stone Unturned                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
         3 Monty Python and the Holy Grail                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
         4 Under New Management                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
         5 Taking Care of Business                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      

7 rows selected.

SQL> 
SQL> /*
SQL> Q10 - Joining 4 tables
SQL> 
SQL> The damage type of the weapon owned by male NPCs that rule locations.
SQL> */
SQL> SELECT C.name, W.wName, T.damageType
  2  FROM NPC C, LocationS L, Weapon W, WeaponType T
  3  WHERE L.refID = C.refID AND
  4  	     C.gender = 'M' AND
  5  C.refID = W.refID AND
  6  W.wName = T.wName;

NAME                 WNAME                DAMAGETYPE                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
-------------------- -------------------- --------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
MaceMan              mace                 bludgeoning                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
SporkBoy             spork                slashing                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
DaggerMan            dagger               slashing                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
Link                 sword                slashing                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
Link                 sword                slashing                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      

5 rows selected.

SQL> /*
SQL> Q20 - Self-Join query
SQL> 
SQL> Show NPCs that are of the same race and do not have the same class.
SQL> */
SQL> SELECT C1.refID, C1.race, C1.charClass, C2.refID, C2.race, C2.charClass
  2  FROM NPC C1, NPC C2
  3  WHERE C1.race = C2.race AND
  4  C1.charClass != C2.charClass;

     REFID RACE                 CHARCLASS                 REFID RACE                 CHARCLASS                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
---------- -------------------- -------------------- ---------- -------------------- --------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
         6 Imperial             fighter                       5 Imperial             bandit                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
         7 Imperial             bandit                        6 Imperial             fighter                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
         5 Imperial             bandit                        6 Imperial             fighter                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
         6 Imperial             fighter                       7 Imperial             bandit                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             

4 rows selected.

SQL> /*
SQL> Q30 - MINUS query
SQL> Find the monsters above level 50 and are not in the location "Plains".
SQL> 
SQL> */
SQL> SELECT M.id, M.monsterLevel, M.locationID
  2  FROM Monster M
  3  WHERE M.monsterLevel > 50
  4  MINUS
  5  SELECT M.id, M.monsterLevel, M.locationID
  6  FROM Monster M, Locations L
  7  WHERE M.locationID = L.locationID AND L.locType = 'Plains';

        ID MONSTERLEVEL LOCATIONID                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
---------- ------------ ----------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
       110           60          3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
       115           70          4                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
       120           99          4                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      

3 rows selected.

SQL> 
SQL> /*
SQL> 
SQL> Q070 A Non-correlated subquery
SQL> 
SQL> */
SQL> SELECT C1.refID, C1.name
  2  FROM NPC C1
  3  WHERE C1.charLevel < 10 AND
  4  		C1.refID IN (SELECT W.refID FROM WEAPON W);

     REFID NAME                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
---------- --------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
         4 SporkBoy                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     

1 row selected.

SQL> 
SQL> /*
SQL> 
SQL> Q 080 A relational DIVISION query.
SQL> Finds all NPCs who have started every quest
SQL>  */
SQL> SELECT
  2    C1.refID,
  3    C1.name
  4  FROM NPC C1
  5  WHERE NOT EXISTS((SELECT Q.questName
  6  		       FROM Quests Q) MINUS
  7  		      (SELECT QS.questName
  8  		       FROM QuestStarted QS
  9  		       WHERE QS.refID = C1.refID));

     REFID NAME                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
---------- --------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
         1 DaggerMan                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    

1 row selected.

SQL> 
SQL> /*
SQL> Q090 - Outer join query
SQL> 
SQL>   Finds all NPCs who have a weapon that isn't a bow
SQL>  */
SQL> SELECT C1.refID, C1.name, W.wID, W.wName, W.refID
  2  FROM NPC C1 LEFT OUTER JOIN Weapon W ON C1.refID=W.refID AND W.wName != 'bow';

     REFID NAME                        WID WNAME                     REFID                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
---------- -------------------- ---------- -------------------- ----------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
         1 DaggerMan                   100 dagger                        1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
         3 MaceMan                     300 mace                          3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
         4 SporkBoy                    400 spork                         4                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
         2 Link                        600 sword                         2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
         5 Archer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
         6 BowMan                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
         7 Charles                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      

7 rows selected.

SQL> 
SQL> /*
SQL> Q100 - RANK query
SQL> Checks to see what rank a weapon with a value of 500 will be  - values in descending order
SQL>  */
SQL> SELECT RANK (500) WITHIN GROUP
  2  	    (ORDER BY wepValue DESC) "Rank of wepValue"
  3  FROM Weapon;

Rank of wepValue                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
----------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
               2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        

1 row selected.

SQL> 
SQL> /*
SQL> Q110: Top-N query
SQL> Checks to see what the 2 most valuable enchantments are
SQL>  */
SQL> SELECT enchantmentName, enchantValue, effect
  2    FROM (SELECT DISTINCT enchantmentName, effect, enchantValue FROM Enchantment ORDER BY enchantValue DESC)
  3  WHERE ROWNUM < 3;

ENCHANTMENTNAME                          ENCHANTVALUE EFFECT                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
---------------------------------------- ------------ ----------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
Master                                           2000 Allows for time travel                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
Lunar                                            1000 Came from the Moon                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                

2 rows selected.

SQL> 
SQL> /*
SQL> Q120: GROUP BY, HAVING, and ORDER BY
SQL> Checks for all weapons with more than one type
SQL> */
SQL> SELECT w.wname, count(*)
  2  FROM weapon w, weapontype t
  3  WHERE t.wname = w.wname
  4  GROUP BY w.wname HAVING count(*) > 1;

WNAME                  COUNT(*)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
-------------------- ----------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
bow                           2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         

1 row selected.

SQL> 
SQL> /*
SQL> Q130: Average
SQL> Averages the weapon damage
SQL> */
SQL> SELECT MAX(Attack) AS maxAttack, MIN(Attack) as minAttack, AVG(Attack) as avgAttack
  2  FROM weapon;

 MAXATTACK  MINATTACK  AVGATTACK                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
---------- ---------- ----------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
        20          2 10.7142857                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        

1 row selected.

SQL> 
SQL> 
SQL> /*
SQL> Q140: Correlated Sub-Query
SQL> Finds all weapons in a location.
SQL> */
SQL> SELECT w.wid
  2  FROM weapon w
  3  WHERE w.attack > 5 and EXISTS
  4  (SELECT  * FROM locations l WHERE w.locationid = l.locationid);

       WID                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
----------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
       200                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
       500                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              

2 rows selected.

SQL> 
SQL> /*
SQL> Testing of the four ICs that are listed in the final documentation
SQL> Via the specs for the project:
SQL> 
SQL> Include the following items for every IC that you test (Important: see the next section titled
SQL> “Submit a final report” regarding which ICs to test).
SQL> A comment line stating: Testing: < IC name>
SQL> 
SQL> /* Testing: SKY_c1 NPC Table
SQL> Ensures that the primary key of an NPC is unique */
SQL> INSERT INTO NPC VALUES (1, 'n', 'CoolGuy', 'M', 'Khajiit', 'bandit', 39, 5);
INSERT INTO NPC VALUES (1, 'n', 'CoolGuy', 'M', 'Khajiit', 'bandit', 39, 5)
*
ERROR at line 1:
ORA-00001: unique constraint (BOUWKAST.SKY_C1) violated 


SQL> 
SQL> /* Testing: SKY_c6 NPC Table
SQL> Ensured that the NPCS location is valid */
SQL> INSERT INTO NPC VALUES (100, 'n', 'NotAsCoolGuy', 'M', 'Khajiit', 'bandit', 39, 50);
INSERT INTO NPC VALUES (100, 'n', 'NotAsCoolGuy', 'M', 'Khajiit', 'bandit', 39, 50)
*
ERROR at line 1:
ORA-02291: integrity constraint (BOUWKAST.SKY_C6) violated - parent key not found 


SQL> 
SQL> /* Testing: SKY_c4 NPC Table
SQL> Ensures a character's level is between 1 and 100;
SQL> */
SQL> INSERT INTO NPC VALUES (10, 'n', 'FinalFinalFinalFinal', 'M', 'Khajiit', 'bandit', 101, 5);
INSERT INTO NPC VALUES (10, 'n', 'FinalFinalFinalFinal', 'M', 'Khajiit', 'bandit', 101, 5)
*
ERROR at line 1:
ORA-02290: check constraint (BOUWKAST.SKY_C4) violated 


SQL> INSERT INTO NPC VALUES (10, 'n', 'bot', 'M', 'Khajiit', 'bandit', -1, 5);
INSERT INTO NPC VALUES (10, 'n', 'bot', 'M', 'Khajiit', 'bandit', -1, 5)
*
ERROR at line 1:
ORA-02290: check constraint (BOUWKAST.SKY_C4) violated 


SQL> 
SQL> 
SQL> /*
SQL> Testing SKY_m4 :Ensures that a monster's value of its loot is not greater than 100 times its level
SQL>  */
SQL> 
SQL> INSERT INTO Monster VALUES (990, 100, 5, 50000, 4, 'squirrel', 100, 10, NULL, NULL, NULL);
INSERT INTO Monster VALUES (990, 100, 5, 50000, 4, 'squirrel', 100, 10, NULL, NULL, NULL)
*
ERROR at line 1:
ORA-02290: check constraint (BOUWKAST.SKY_M4) violated 


SQL> COMMIT;

Commit complete.

SQL> SET ECHO OFF
